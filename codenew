import telnetlib
import time

hostname = '192.168.56.101'
username = 'tufan'
password = '123'

try:
    # Connect to the device
    connection = telnetlib.Telnet(hostname, timeout=10)

    # Read until prompted for username
    connection.read_until(b'Username: ', timeout=5)
    connection.write(username.encode('ascii') + b'\n')

    # Read until prompted for password
    connection.read_until(b'Password: ', timeout=5)
    connection.write(password.encode('ascii') + b'\n')

    # Wait for the prompt to be ready for commands
    time.sleep(2)

    # Send a command and handle --More-- prompt
    connection.write(b'show version\n')
    time.sleep(1)

    output = b""
    while True:
        chunk = connection.read_very_eager()
        output += chunk
        if b'--More--' in chunk:
            connection.write(b' ')  # Send space to get more output
        else:
            break

    print(output.decode('ascii'))

    # Close the connection
    connection.close()

except Exception as e:
    print(f"Error: {e}")