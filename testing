from netmiko import ConnectHandler
import time

host = "192.168.56.101"
username = "tufan"
password = "123"

device = {
    'device_type': 'cisco_ios',
    'host': host,
    'username': username,
    'password': password,
    'secret': password,  # Enable password
    'global_delay_factor': 2,
}

try:
    # Establish an SSH connection
    connection = ConnectHandler(**device)
    print("Connected to " + host)

    # Enter privileged EXEC mode
    connection.enable()
    print("Entered privileged EXEC mode: ", connection.find_prompt())

    # Retrieve the running configuration
    running_config = connection.send_command("show running-config")
    time.sleep(1)
    print(running_config)

    # Save the running configuration to a file
    with open("running_config_backup.txt", "w") as file:
        file.write(running_config)
    print("Running configuration saved locally as running_config_backup.txt")

    # Interactive command input
    while True:
        command = input("CSR1kv> ")
        if command.lower() in ["exit", "quit"]:
            print("Exiting")
            connection.disconnect()
            break

        if command.lower() == "configure terminal":
            connection.config_mode()
            print("Entered configuration mode: ", connection.find_prompt())
            continue

        # Send command
        output = connection.send_command_timing(command)

        # Provide help for common Cisco commands if user attempts to use Linux commands
        if command.lower() == "ifconfig":
            print("Note: 'ifconfig' is not a valid command for Cisco IOS. Use 'show ip interface brief' instead.")

        time.sleep(1)
        print(output)

except Exception as e:
    print(f"Error: {e}")

finally:
    print("Connection closed.")





